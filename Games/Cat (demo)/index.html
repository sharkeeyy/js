<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Приключения кота</title>
  </head>
<body>
  <img id="source" src="https://cdn4.iconfinder.com/data/icons/small-n-flat/24/cat-512.png" width="30" height="30">
  <button id="button1" onclick="speedDown()">Замедлить</button>
  <button id="button2" onclick="speedUp()">Ускорить</button>
  <input type="text" id="coordXY">
  <p>
  <canvas id="canvas" width="1350" height="650" style="border : 1px solid"></canvas>


  <script type="text/javascript">
    var canvas = document.getElementById('canvas');
    var context = canvas.getContext('2d');
    var image = document.getElementById('source');

    var imgHeight = 100, imgWidth = 100;
    var bHeight = 650, bWidth = 1350;
    var x0 = 100.0, y0 = 100.0;
    var speed = 10.0;

    var destinationReached = true;
    var x = 0.0, y = 0.0;
    var xk = 0.0, yk = 0.0;
    var dx = 1.0, dy = 1.0;
    var s;


    function drawCat() {
      context.clearRect(0, 0, bWidth, bHeight);
      //context.fillRect(0, 0, xk, yk);
      context.drawImage(image, parseInt(x), parseInt(y), imgWidth, imgHeight);
    }

    function getRandom(min, max) {
      return Math.random() * (max - min) + min;
    }

    function speedDown() {
      if (speed > 0) {
        speed -= 0.25;
      }
    }

    function speedUp() {
      speed += 1
    }

    x = x0;
    y = y0;

    var gameLoop = function() {

      if (destinationReached) {
        xk = getRandom(0, bWidth - imgWidth);
        yk = getRandom(0, bHeight - imgHeight);
        s = Math.sqrt(Math.abs(xk - x)*Math.abs(xk - x) + Math.abs(yk - y)*Math.abs(yk - y));
        dx = (xk - x) / s;
        dy = (yk - y) / s;

        destinationReached = false;

        document.getElementById("coordXY").value = parseInt(xk) + "  " + parseInt(yk);
      } else if (!destinationReached){
        x += dx * speed;
        y += dy * speed;
        if ((Math.abs(x - xk) <= 10) && (Math.abs(y - yk) <= 10)) {
          destinationReached = true;
        }
      }

      drawCat();

      requestAnimationFrame(gameLoop);
    }

    gameLoop();


  </script>
</body>
</html>
